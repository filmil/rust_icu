# Dockerfile for running rust_icu tests based
# on source that has been mounted in.
ARG DOCKER_REPO=filipfilmar
ARG VERSION=0.0.0
FROM $DOCKER_REPO/rust_icu_maint-64:$VERSION AS buildenv

# Mount the rust_icu source top level directory here.
ENV RUST_ICU_SOURCE_DIR=/src/rust_icu

RUN mkdir -p $RUST_ICU_SOURCE_DIR
VOLUME [ $RUST_ICU_SOURCE_DIR ]

ENTRYPOINT ( \
		cd $RUST_ICU_SOURCE_DIR; \
		env LD_LIBRARY_PATH=/usr/local/lib cargo test; \
		)

